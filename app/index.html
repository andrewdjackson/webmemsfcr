<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="MemsFCR Online Analysis">
	<meta name="author" content="Andrew Jackson">
	<meta name="google" content="notranslate"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>

	<title>Web MemsFCR</title>
	<link rel="shortcut icon" href="/static/favicon.ico" />

<!-- includes.html -->
	<!-- Bootstrap 5 -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="/static/scripts/thirdparty/popper.min.js"></script>
	<script src="/static/scripts/thirdparty/bootstrap.bundle.min.js"></script>
	<link href="/static/scripts/thirdparty/bootstrap.min.css" rel="stylesheet">
	<script async src="/static/scripts/thirdparty/es-module-shims.js"></script>
	<script type="importmap">
	{
		"imports": {
			"@popperjs/core": "/static/scripts/thirdparty/popper.min.js",
			"bootstrap": "/static/scripts/thirdparty/bootstrap.esm.min.js"
		}
	}
	</script>

	<script>
		// enable bootstrap tooltips
		const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
		const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

		// enable bootstrap popovers
		const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
		const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
	</script>

	<!-- general -->
	<link href="/static/styles/elements.css" rel="stylesheet">
	<!-- charts -->
	<link href="/static/styles/charts.css" rel="stylesheet">
<!-- includes.html -->

	<script type="module">
		//
		// initialise the ecu and event queue
		//
		import {initialise} from "/static/scripts/view/init.js";
		initialise();
	</script>

	<script type="text/javascript" charset="utf-8">
		let wsUrl = "ws://" + document.location.host + "/ws";
		let conn = new WebSocket(wsUrl);
		conn.onclose = function (evt) {
			console.warn(`ws closed`);
		};
		// Add a listener to the onmessage event
		conn.onmessage = function(evt) {
			console.log(evt);
		};
		setInterval(function() {
			let event = {"event":"keep-alive"};
			console.log(`ws keep-alive ${wsUrl}`);
			conn.send(JSON.stringify(event));
		}, 5000);
	</script>
</head>

<body>
<div class="page-wrapper toggled">
	<header>
<!-- header.html -->
		<nav class="navbar-light bg-light navbar-fixed-top fixed-top mx-2 pt-2">
			<div class="container-fluid">
				<div class="nav nav-tabs" id="nav-tab" role="tablist">
					<button class="nav-link navbar-brand" id="nav-dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Dashboard</button>
					<button class="nav-link navbar-brand" id="nav-analysis-tab" data-bs-toggle="tab" data-bs-target="#analysis" type="button" role="tab" aria-controls="nav-analysis" aria-selected="true">Faults
						<span class="badge d-none rounded-pill bg-danger fault-count">4</span>
					</button>
					<button class="nav-link navbar-brand active" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Charts</button>
					<button class="nav-link navbar-brand" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">ECU Data</button>
					<button class="nav-link navbar-brand koeo-enabled" id="nav-test-tab" data-bs-toggle="tab" data-bs-target="#test" type="button" role="tab" aria-controls="nav-test" aria-selected="false">Test Components</button>
					<button class="nav-link navbar-brand" id="nav-guide-tab" data-bs-toggle="tab" data-bs-target="#guide" type="button" role="tab" aria-controls="nav-guide" aria-selected="false">Guide</button>

					<div class="row">
						<div class="col ms-5">
							<button id="connectButton" class="btn btn-success ecu-control ecu-enabled-disconnected">Connect</button>
							<button id="disconnectButton" class="btn btn-danger ecu-control ecu-enabled-connected" disabled>Disconnect</button>
							<button id="pauseButton" class="btn btn-warning ecu-control ecu-enabled-connected" disabled>Pause</button>
							<button id="downloadLogButton" class="btn btn-secondary has-logged-data" disabled>Download Log</button>
						</div>
					</div>
				</div>
			</div>
		</nav>
<!-- header.html -->
	</header>

<!-- toast.html -->
	<div aria-live="polite" aria-atomic="true" class="position-relative" style="z-index: 10000;">
		<div class="toast-container position-absolute top-0 end-0 p-3">
			<div id="alert-toast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="d-flex">
					<div id="alert-toast-body" class="toast-body"></div>
					<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
			</div>
		</div>
	</div>
<!-- toast.html -->

<!-- messages.html -->
	<div class="modal fade" id="modalMessage" tabindex="-1" aria-labelledby="modalMessageTitle" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centere">
			<div class="modal-content">
				<div class="modal-header bg-danger text-white">
					<h5 class="modal-title" id="modalMessageTitle"></h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p id="modalMessageText"></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
<!-- messages.html -->

	<main class="page-content">
		<div class="container-fluid">
			<div class="tab-content shadow-sm pt-3">

				<!-- spacing from navbar -->
				<div class="card-body text-center">
					&nbsp;
				</div>

				<!-- ecu data and adjustments -->
				<div id="home" class="tab-pane fade" aria-labelledby="home">
					<div class="card mt-3">
						<div class="card-body text-center">
							<!-- adjustments.html -->
							<div class="card p-3 m-3 fs-6">
								<p>
									These controls allow you to make adjustments to key parameters. If you need to adjust these parameters, it's indicative of an issue elsewhere.
								</p>
								<p>
									<strong>Only modify these parameters if you know what you're doing!</strong>
								</p>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_idle_speed_offset_increase" name="adjust_idle_speed_offset" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_idle_speed_offset" class="btn btn-outline-dark" disabled>Idle Speed Offset</button>
								<button id="adjust_idle_speed_offset_decrease" name="adjust_idle_speed_offset" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_idle_iacv_increase" name="adjust_idle_iacv" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_idle_iacv" class="btn btn-outline-dark" disabled>(IAC) Stepper Motor Steps</button>
								<button id="adjust_idle_iacv_decrease" name="adjust_idle_iacv" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_idle_hot_increase" name="adjust_idle_hot" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_idle_hot" class="btn btn-outline-dark" disabled>Idle (Hot) Decay</button>
								<button id="adjust_idle_hot_decrease" name="adjust_idle_hot" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_stft_increase" name="adjust_stft" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_stft" class="btn btn-outline-dark" disabled>STFT</button>
								<button id="adjust_stft_decrease" name="adjust_stft" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_ltft_increase" name="adjust_ltft" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_ltft" class="btn btn-outline-dark" disabled>LTFT</button>
								<button id="adjust_ltft_decrease" name="adjust_ltft" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="btn-group" role="group">
								<button id="adjust_ignition_advance_increase" name="adjust_ignition_advance" value="decrease" class="btn btn-outline-secondary adjustment ecu-enabled-connected">- </button>
								<button id="adjust_ignition_advance" class="btn btn-outline-dark" disabled>Ignition Advance</button>
								<button id="adjust_ignition_advance_decrease" name="adjust_ignition_advance" value="increase" class="btn btn-outline-secondary adjustment ecu-enabled-connected">+ </button>
							</div>

							<div class="card p-3 m-3 text-start">
								<div class="row">
									<div class="col">
										<div class="row">
											<div class="col col-sm-2">
												<button id="clearFaultsButton" class="btn btn-danger ecu-control ecu-enabled-connected" disabled>Clear Faults</button>
											</div>
											<div class="col">
												Clears the faults raised by the ECU.<br> This will not clear any faults diagnosed by MemsFCR, you'll need a book and some spanners for that.
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col col-sm-2">
												<button id="resetECUButton" class="btn btn-danger ecu-control ecu-enabled-connected" disabled>Reset ECU</button>
											</div>
											<div class="col">
												Resets all adjustments and computed values like fuel trim and jack count.<br> This is useful if you have made major changes to a number of key sensors.
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- adjustments.html -->
						</div>
					</div>

					<div class="card mt-3">
						<div class="card-body text-center">
							<!-- ecudata.html -->
							<div class="text-start" id="ecuid">ECU ID:</div>

							<div class="row align-items-start justify-content-evenly text-start">
								<div class="col">
									<table class="table table-striped table-sm">
										<tbody id="df80table">
										<tr>
											<td>Coolant Sensor Fault</td>
											<td class="ecudata_CoolantTempSensorFault">&nbsp;</td>
										</tr>
										<tr>
											<td>Fuel Pump Circuit Fault</td>
											<td class="ecudata_FuelPumpCircuitFault">&nbsp;</td>
										</tr>
										<tr>
											<td>Intake Air Sensor Fault</td>
											<td class="ecudata_IntakeAirTempSensorFault">&nbsp;</td>
										</tr>
										<tr>
											<td>Throttle Pot. Fault</td>
											<td class="ecudata_ThrottlePotCircuitFault">&nbsp;</td>
										</tr>
										<tr>
											<td>Time</td>
											<td class="ecudata__80x00_Time">&nbsp;</td>
										</tr>
										<tr>
											<td>80x01 RPM</td>
											<td class="ecudata__80x01_EngineRPM">&nbsp;</td>
										</tr>
										<tr>
											<td>80x03 Coolant (°C)</td>
											<td class="ecudata__80x03_CoolantTemp">&nbsp;</td>
										</tr>
										<tr>
											<td>80x05 Intake Air (°C)</td>
											<td class="ecudata__80x05_IntakeAirTemp">&nbsp;</td>
										</tr>
										<tr>
											<td>80x07 MAP (kPA)</td>
											<td class="ecudata__80x07_ManifoldAbsolutePressure">&nbsp;</td>
										</tr>
										<tr>
											<td>80x08 Battery (V)</td>
											<td class="ecudata__80x08_BatteryVoltage">&nbsp;</td>
										</tr>
										<tr>
											<td>80x09 Throttle Pot. (V)</td>
											<td class="ecudata__80x09_ThrottlePotSensor">&nbsp;</td>
										</tr>
										<tr>
											<td>80x0a Idle Switch</td>
											<td class="ecudata__80x0A_IdleSwitch">&nbsp;</td>
										</tr>
										<tr>
											<td>80x0c Neutral Switch</td>
											<td class="ecudata__80x0C_ParkNeutralSwitch">&nbsp;</td>
										</tr>
										<tr>
											<td>80x0f Idle Set Point</td>
											<td class="ecudata__80x0F_IdleSetPoint">&nbsp;</td>
										</tr>
										<tr>
											<td>80x10 Hot Idle</td>
											<td class="ecudata__80x10_IdleHot">&nbsp;</td>
										</tr>
										<tr>
											<td>80x12 IAC Position (Steps)</td>
											<td class="ecudata__80x12_IACPosition">&nbsp;</td>
										</tr>
										<tr>
											<td>80x13 Idle Speed Deviation</td>
											<td class="ecudata__80x13_IdleSpeedDeviation">&nbsp;</td>
										</tr>
										<tr>
											<td>80x15 Ignition Adv. Offset</td>
											<td class="ecudata__80x15_IgnitionAdvanceOffset">&nbsp;</td>
										</tr>
										<tr>
											<td>80x16 Ignition Adv.</td>
											<td class="ecudata__80x16_IgnitionAdvance">&nbsp;</td>
										</tr>
										<tr>
											<td>80x17 Coil Time (ms)</td>
											<td class="ecudata__80x17_CoilTime">&nbsp;</td>
										</tr>
										<tr>
											<td>80x19 Crankshaft Position</td>
											<td class="ecudata__80x19_CrankshaftPositionSensor">&nbsp;</td>
										</tr>
										</tbody>
									</table>
								</div>

								<div class="col">
									<table class="table table-striped table-sm">
										<tbody id="df7dtable">
										<tr>
											<td>7dx01 Ignition Switch</td>
											<td class="ecudata__7Dx01_IgnitionSwitch">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx02 Throttle Angle (°)</td>
											<td class="ecudata__7Dx02_ThrottleAngle">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx04 Air Fuel Ratio</td>
											<td class="ecudata__7Dx04_AirFuelRatio">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx06 Lambda Voltage (mV)</td>
											<td class="ecudata__7Dx06_LambdaVoltage">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx07 Lambda Freq.</td>
											<td class="ecudata__7Dx07_LambdaFrequency">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx08 Lambda Duty Cycle</td>
											<td class="ecudata__7Dx08_LambdaDutycycle">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx09 O2 Circuit Status</td>
											<td class="ecudata__7Dx09_LambdaStatus">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx0a Close Loop Active</td>
											<td class="ecudata__7Dx0A_ClosedLoop">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx0b LTFT</td>
											<td class="ecudata__7Dx0B_LongTermFuelTrim">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx0c STFT</td>
											<td class="ecudata__7Dx0C_ShortTermFuelTrim">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx0d Purge Valve</td>
											<td class="ecudata__7Dx0D_CarbonCanisterPurgeValve">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx0f Idle Base Position</td>
											<td class="ecudata__7Dx0F_IdleBasePosition">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx12 Ignition Adv.Offset</td>
											<td class="ecudata__7Dx12_IgnitionAdvanceOffset">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx13 Idle Speed Offset</td>
											<td class="ecudata__7Dx13_IdleSpeedOffset">&nbsp;</td>
										</tr>
										<tr>
											<td>7dx1f Jack Count</td>
											<td class="ecudata__7Dx1F_JackCount">&nbsp;</td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
							<!-- ecudata.html -->
						</div>
					</div>
				</div>

				<!-- charts -->
				<div id="profile" class="tab-pane fade show active" aria-labelledby="profile">
					<div class="card mt-3">
						<div class="card-body">
							<!-- charts.html -->
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x01 RPM" class="ecuchart _80x01_EngineRPM" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x01 RPM</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x01_EngineRPM">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x03 Coolant (°C)" class="ecuchart _80x03_CoolantTemp" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x03 Coolant (°C)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x03_CoolantTemp">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x05 Intake Air (°C)" class="ecuchart _80x05_IntakeAirTemp" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x05 Intake Air (°C)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x05_IntakeAirTemp">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x07 MAP (kPA)" class="ecuchart _80x07_ManifoldAbsolutePressure" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x07 MAP (kPA)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x07_ManifoldAbsolutePressure">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x08 Battery (V)" class="ecuchart _80x08_BatteryVoltage" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x08 Battery (V)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x08_BatteryVoltage">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x09 Throttle Pot. (V)" class="ecuchart _80x09_ThrottlePotSensor" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x09 Throttle Pot. (V)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x09_ThrottlePotSensor">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x0a Idle Switch" class="ecuchart _80x0A_IdleSwitch" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x0a Idle Switch</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x0A_IdleSwitch">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x0c Neutral Switch" class="ecuchart _80x0C_ParkNeutralSwitch" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x0c Neutral Switch</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x0C_ParkNeutralSwitch">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x0f Idle Set Point" class="ecuchart _80x0F_IdleSetPoint" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x0f Idle Set Point</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x0F_IdleSetPoint">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x10 Hot Idle" class="ecuchart _80x10_IdleHot" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x10 Hot Idle</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x10_IdleHot">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x12 IAC Position (Steps)" class="ecuchart _80x12_IACPosition" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x12 IAC Position (Steps)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x12_IACPosition">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x13 Idle Speed Deviation" class="ecuchart _80x13_IdleSpeedDeviation" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x13 Idle Speed Deviation</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x13_IdleSpeedDeviation">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x15 Ignition Adv. Offset" class="ecuchart _80x15_IgnitionAdvanceOffset" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x15 Ignition Adv. Offset</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x15_IgnitionAdvanceOffset">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x16 Ignition Adv." class="ecuchart _80x16_IgnitionAdvance" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x16 Ignition Adv.</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x16_IgnitionAdvance">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x17 Coil Time (ms)" class="ecuchart _80x17_CoilTime" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x17 Coil Time (ms)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x17_CoilTime">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="80x19 Crankshaft Position" class="ecuchart _80x19_CrankshaftPositionSensor" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">80x19 Crankshaft Position</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__80x19_CrankshaftPositionSensor">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx01 Ignition Switch" class="ecuchart _7Dx01_IgnitionSwitch" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx01 Ignition Switch</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx01_IgnitionSwitch">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx02 Throttle Angle (°)" class="ecuchart _7Dx02_ThrottleAngle" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx02 Throttle Angle (°)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx02_ThrottleAngle">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx04 Air Fuel Ratio" class="ecuchart _7Dx04_AirFuelRatio" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx04 Air Fuel Ratio</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx04_AirFuelRatio">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx06 Lambda Voltage (mV)" class="ecuchart _7Dx06_LambdaVoltage" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx06 Lambda Voltage (mV)</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx06_LambdaVoltage">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx07 Lambda Freq." class="ecuchart _7Dx07_LambdaFrequency" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx07 Lambda Freq.</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx07_LambdaFrequency">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx08 Lambda Duty Cycle" class="ecuchart _7Dx08_LambdaDutycycle" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx08 Lambda Duty Cycle</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx08_LambdaDutycycle">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx09 O2 Circuit Status" class="ecuchart _7Dx09_LambdaStatus" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx09 O2 Circuit Status</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx09_LambdaStatus">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx0a Close Loop Active" class="ecuchart _7Dx0A_ClosedLoop" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx0a Close Loop Active</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx0A_ClosedLoop">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx0b LTFT" class="ecuchart _7Dx0B_LongTermFuelTrim" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx0b LTFT</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx0B_LongTermFuelTrim">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx0c STFT" class="ecuchart _7Dx0C_ShortTermFuelTrim" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx0c STFT</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx0C_ShortTermFuelTrim">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx0d Purge Valve" class="ecuchart _7Dx0D_CarbonCanisterPurgeValve" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx0d Purge Valve</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx0D_CarbonCanisterPurgeValve">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx0f Idle Base Position" class="ecuchart _7Dx0F_IdleBasePosition" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx0f Idle Base Position</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx0F_IdleBasePosition">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx12 Ignition Adv.Offset" class="ecuchart _7Dx12_IgnitionAdvanceOffset" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx12 Ignition Adv.Offset</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx12_IgnitionAdvanceOffset">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx13 Idle Speed Offset" class="ecuchart _7Dx13_IdleSpeedOffset" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx13 Idle Speed Offset</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx13_IdleSpeedOffset">0</div>
							</div>
							<div class="position-relative">
								<div class="chart-container"><canvas title="7dx1f Jack Count" class="ecuchart _7Dx1F_JackCount" height="150"></canvas></div>
								<div class="position-absolute top-50 end-0 m-3 ecudata-label">7dx1f Jack Count</div>
								<div class="position-absolute bottom-0 end-0 m-3 ecudata__7Dx1F_JackCount">0</div>
							</div>
							<!-- charts.html -->
						</div>
					</div>
				</div>

				<!-- test actuators -->
				<div id="test" class="tab-pane fade" aria-labelledby="test">
					<div class="card mt-3">
						<div class="card-body">
							<!-- actuators.html-->
							<div class="text-center">
								<div class="card m-3 fs-6">
									<p>
										The MEMS ECU supports the ability to manually test various components and sensors.<br>
										<br>
										When you switch on a control you should hear the relay click or the fuel pump run for example.<br>
										The temperature gauge control is very useful in verifying that the output from the ECU is operating the temperature gauge correctly.<br>
									</p>
									<p>
										<strong>These components are essential to the smooth operation of the engine, these controls are only available when the engine is not running.</strong>
									</p>
								</div>
								<div class="container">
									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_temp_gauge_activate" name="actuate_temp_gauge" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_temp_gauge" class="btn btn-outline-dark col-3" disabled>Temperature Gauge</button>
										<button id="actuate_temp_gauge_deactivate" name="actuate_temp_gauge" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_fuel_pump_activate" name="actuate_fuel_pump" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_fuel_pump" class="btn btn-outline-dark col-3" disabled>Fuel Pump</button>
										<button id="actuate_fuel_pump_deactivate" name="actuate_fuel_pump" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_ptc_activate" name="actuate_ptc" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_ptc" class="btn btn-outline-dark col-3" disabled>Manifold Heater</button>
										<button id="actuate_ptc_deactivate" name="actuate_ptc" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_aircon_activate" name="actuate_aircon" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_aircon" class="btn btn-outline-dark col-3" disabled>Air Con</button>
										<button id="actuate_aircon_deactivate" name="actuate_aircon" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_purge_valve_activate" name="actuate_purge_valve" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_purge_valve" class="btn btn-outline-dark col-3" disabled>Purge Valve</button>
										<button id="actuate_purge_valve_deactivate" name="actuate_purge_valve" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_lambda_heater_activate" name="actuate_lambda_heater" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_lambda_heater" class="btn btn-outline-dark col-3" disabled>Lambda Heater</button>
										<button id="actuate_lambda_heater_deactivate" name="actuate_lambda_heater" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_fan_1_activate" name="actuate_fan_1" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_fan_1" class="btn btn-outline-dark col-3" disabled>Fan 1</button>
										<button id="actuate_fan_1_deactivate" name="actuate_fan_1" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_fan_2_activate" name="actuate_fan_2" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_fan_2" class="btn btn-outline-dark col-3" disabled>Fan 2</button>
										<button id="actuate_fan_2_deactivate" name="actuate_fan_2" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_injector_activate" name="actuate_injector" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_injector" class="btn btn-outline-dark col-3" disabled>Injector</button>
										<button id="actuate_injector_deactivate" name="actuate_injector" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>

									<div class="d-grid d-md-block justify-content-md-center btn-group p-2">
										<button id="actuate_coil_activate" name="actuate_coil" value="activate" class="btn btn-outline-success col-1 actuator koeo-enabled">ON</button>
										<button id="actuate_coil" class="btn btn-outline-dark col-3" disabled>Coil</button>
										<button id="actuate_coil_deactivate" name="actuate_coil" value="deactivate" class="btn btn-outline-danger col-1 actuator koeo-enabled">OFF</button>
									</div>
								</div>
							</div>
							<!-- actuators.html-->
						</div>
					</div>
				</div>

				<!-- analysis -->
				<div id="analysis" class="tab-pane fade" aria-labelledby="analysis">
					<!-- analysis.html-->
					<div class="card mt-3">
						<div class="card-body">
							<p class="analysis-no_faults alert alert-success">No faults found</p>

							<p class="alert alert-warning analysis-engine_cold">Engine operating temperature has not yet been achieved in this run. There maybe faults that have not been detected that only appear once the engine is warm.</p>

							<div class="card d-none mt-3 analysis-has_faults">
								<div class="card-header alert alert-danger">Faults Detected</div>
								<div class="card-body">
									<p class="d-none analysis-battery_fault analysis-title">Battery Voltage Low</p>
									<p class="d-none analysis-coil_fault analysis-title">Coil Timing High</p>
									<p class="d-none analysis-coolant_temperature_fault analysis-title">Coolant Sensor Fault</p>
									<p class="d-none analysis-idle_fault analysis-title">Idle Fault when Cold</p>
									<p class="d-none analysis-idle_hot_fault analysis-title">Idle Fault when Hot</p>
									<p class="d-none analysis-iac_fault analysis-title">Stepper Motor Control (IACV) Fault</p>
									<p class="d-none analysis-idle_speed_fault analysis-title">Idle Speed Control Fault</p>
									<p class="d-none analysis-inlet_air_temp_sensor_fault analysis-title">Inlet Air Temperature Sensor Fault</p>
									<p class="d-none analysis-map_fault analysis-title">MAP Reading Too High</p>
									<p class="d-none analysis-vacuum_fault analysis-title">Possible Vacuum Leak</p>
									<p class="d-none analysis-o2_system_fault analysis-title">O2 System Fault</p>
									<p class="d-none analysis-thermostat_fault analysis-title">Possible Thermostat Fault</p>
									<p class="d-none analysis-throttle_pot_circuit_fault analysis-title">Throttle Potentiometer Circuit Fault</p>
									<p class="d-none analysis-crankshaft_position_sensor_fault analysis-title">Possible Crankshaft Position Sensor Fault</p>
									<p class="d-none analysis-iac_jack_fault analysis-title">ECU Reaching IAC Stepper Motor Limits (Jack Count High)</p>
								</div>
							</div>

							<div class="card mt-3 d-none analysis-battery_fault">
								<div class="card-header alert alert-danger analysis-battery_fault analysis-title"></div>
								<div class="card-body analysis-battery_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-coil_fault">
								<div class="card-header alert alert-danger analysis-coil_fault analysis-title"></div>
								<div class="card-body analysis-coil_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-coolant_temperature_fault">
								<div class="card-header alert alert-danger analysis-coolant_temperature_fault analysis-title"></div>
								<div class="card-body analysis-coolant_temperature_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-idle_hot_fault">
								<div class="card-header alert alert-danger analysis-idle_hot_fault analysis-title"></div>
								<div class="card-body analysis-idle_hot_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-idle_fault">
								<div class="card-header alert alert-danger analysis-idle_fault analysis-title"></div>
								<div class="card-body analysis-idle_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-iac_fault">
								<div class="card-header alert alert-danger analysis-iac_fault analysis-title"></div>
								<div class="card-body analysis-iac_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-idle_speed_fault">
								<div class="card-header alert alert-danger analysis-idle_speed_fault analysis-title"></div>
								<div class="card-body analysis-idle_speed_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-inlet_air_temp_sensor_fault">
								<div class="card-header alert alert-danger analysis-inlet_air_temp_sensor_fault analysis-title"></div>
								<div class="card-body analysis-inlet_air_temp_sensor_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-map_fault">
								<div class="card-header alert alert-danger analysis-map_fault analysis-title"></div>
								<div class="card-body analysis-map_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-vacuum_fault">
								<div class="card-header alert alert-danger analysis-vacuum_fault analysis-title"></div>
								<div class="card-body analysis-vacuum_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-o2_system_fault">
								<div class="card-header alert alert-danger analysis-o2_system_fault analysis-title"></div>
								<div class="card-body analysis-o2_system_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-thermostat_fault">
								<div class="card-header alert alert-danger analysis-thermostat_fault analysis-title"></div>
								<div class="card-body analysis-thermostat_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-throttle_pot_circuit_fault">
								<div class="card-header alert alert-danger analysis-throttle_pot_circuit_fault analysis-title"></div>
								<div class="card-body analysis-throttle_pot_circuit_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-crankshaft_position_sensor_fault">
								<div class="card-header alert alert-danger analysis-crankshaft_position_sensor_fault analysis-title"></div>
								<div class="card-body analysis-crankshaft_position_sensor_fault analysis-content"></div>
							</div>

							<div class="card mt-3 d-none analysis-iac_jack_fault">
								<div class="card-header alert alert-danger analysis-iac_jack_fault analysis-title"></div>
								<div class="card-body analysis-iac_jack_fault analysis-content"></div>
							</div>

						</div>
					</div>
					<!-- analysis.html-->
				</div>

				<!-- dashboard -->
				<div id="dashboard" class="tab-pane fade" aria-labelledby="dashboard">
					<div class="card mt-3">
						<div class="card-body">
							<!-- dashboard.html-->
							<div class="container">

								<div class="row row-cols-4 mt-2 mb-4">
									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x01_EngineRPM">Engine RPM</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x01_EngineRPM">&nbsp;</div>
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Engine RPM" class="ecuspark _80x01_EngineRPM" height="150"></canvas></div>
											</div>
										</div>

									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x09_ThrottlePotSensor">Throttle Position</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x09_ThrottlePotSensor">&nbsp;</div>
											</div>

											<div class="col col-4">
												V
											</div>

										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Throttle Position" class="ecuspark _80x09_ThrottlePotSensor" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault_EngineIdle">Engine Status</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata_EngineIdle">Off&nbsp;</div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x12_IACPosition">IAC Position</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x12_IACPosition">&nbsp;</div>
											</div>

											<div class="col col-4">
												Steps
											</div>
										</div>
									</div>
								</div>

								<div class="row row-cols-4 mt-2 mb-4">
									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x03_CoolantTemp">Coolant Temp</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x03_CoolantTemp">&nbsp;</div>
											</div>
											<div class="col col-4">
												°C
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Coolant Temp" class="ecuspark _80x03_CoolantTemp" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x05_IntakeAirTemp">Intake Air Temp</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x05_IntakeAirTemp">&nbsp;</div>
											</div>
											<div class="col col-4">
												°C
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Intake Air Temp" class="ecuspark _80x05_IntakeAirTemp" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x08_BatteryVoltage">Battery</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x08_BatteryVoltage">&nbsp;</div>
											</div>

											<div class="col col-4">
												°C
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x16_IgnitionAdvance">Ignition Advance</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x16_IgnitionAdvance">&nbsp;</div>
											</div>
											<div class="col col-4">
												°
											</div>
										</div>
									</div>
								</div>

								<div class="row row-cols-4 mt-2 mb-4">
									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__80x07_ManifoldAbsolutePressure">MAP</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__80x07_ManifoldAbsolutePressure">&nbsp;</div>
											</div>
											<div class="col col-4">
												kPa
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="MAP" class="ecuspark _80x07_ManifoldAbsolutePressure" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__7Dx06_LambdaVoltage">Lambda Voltage</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__7Dx06_LambdaVoltage">&nbsp;</div>
											</div>
											<div class="col col-4">
												mV
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Lambda Voltage" class="ecuspark _7Dx06_LambdaVoltage" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__7Dx0A_ClosedLoop">Loop Status</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__7Dx0A_ClosedLoop">-&nbsp;</div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__7Dx09_LambdaStatus">O2 System Active</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__7Dx09_LambdaStatus">Inactive&nbsp;</div>
											</div>
											<div class="col col-4">
											</div>
										</div>
									</div>
								</div>

								<div class="row row-cols-4 mt-2 mb-4">
									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__7Dx0C_ShortTermFuelTrim">Short Term Fuel Trim</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__7Dx0C_ShortTermFuelTrim">&nbsp;</div>
											</div>
											<div class="col col-4">
												%
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Short Term Fuel Trim" class="ecuspark _7Dx0C_ShortTermFuelTrim" height="150"></canvas></div>
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault__7Dx0B_LongTermFuelTrim">Long Term Fuel Trim</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata__7Dx0B_LongTermFuelTrim">&nbsp;</div>
											</div>
											<div class="col col-4">
												%
											</div>
										</div>

										<div class="row">
											<div class="col">
												<div class="col dashboard-chart-container"><canvas title="Long Term Fuel Trim" class="ecuspark _7Dx0B_LongTermFuelTrim" height="150"></canvas></div>
											</div>
										</div>
									</div>
								</div>

								<div class="row row-cols-4 mt-2 mb-4">
									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault_CoolantTempSensorFault">Coolant Sensor Fault</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata_CoolantTempSensorFault">-&nbsp;</div>
											</div>
											<div class="col col-4">
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault_IntakeAirTempSensorFault">Intake Temperature Sensor Fault</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata_IntakeAirTempSensorFault">-&nbsp;</div>
											</div>
											<div class="col col-4">
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault_FuelPumpCircuitFault">Fuel Pump Circuit Fault</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata_FuelPumpCircuitFault">-&nbsp;</div>
											</div>
											<div class="col col-4">
											</div>
										</div>
									</div>

									<div class="col">
										<div class="row">
											<div class="col">
												<div class="text-black-50 fault_ThrottlePotCircuitFault">Throttle Pot. Circuit Fault</div>
											</div>
										</div>
										<div class="row">
											<div class="col">
												<div class="fs-1 ecudata_ThrottlePotCircuitFault">-&nbsp;</div>
											</div>
											<div class="col col-4">
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- dashboard.html-->
						</div>
					</div>
				</div>

				<!-- guidance -->
				<div id="guide" class="tab-pane fade" aria-labelledby="test">
					<!-- guidance.html -->

					<!-- guide-to-ecu.jinja -->
					<div class="card mt-3 bg-light">
						<div class="card-header">How the ECU and Injection System Works</div>
						<div class="card-body">
							<div>
								<div class="card p-3">
									<h5>The Rover Modular Engine Management System (MEMS) ECU</h5>
									<p>
										The Rover MEMS ECU is a sophisticated engine management system.
										It's principle role is to create the most optimised air / fuel mixture for the engine given the current conditions.
										To do this the ECU needs to know the load and environmental conditions that it uses in the complex air / fuel ratio (AFR) calculation.
									</p>
									<div class="row row-cols-8 my-2">
										<div class="col-1">
											<img src="/static/images/mems-1.3.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<p>
												The early SPI (pre-1993) is fitted with the Rover MEMS 1.3, this ECU is distinguishable from later versions as it has 2 connectors.
												This ECU does not support O2 System information.
											</p>
										</div>
										<div class="col-1">
											<img src="/static/images/mems-1.6.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<p>
												Later SPI's are fitted with the Rover MEMS ECU 1.6.
												This version of the ECU has a single connector and provides additional data for management of the O2 System / Closed-loop operation.
											</p>
										</div>
									</div>
								</div>

								<!-- guide-to-ecu-sensors.html -->
								<div class="card p-3 mt-2">
									<h5>Sensors used by the ECU</h5>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-crankshaft-sensor.png" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Crankshaft Position Sensor (CAS)</h5>
											<p>
												Fitted on the front left side of the engine, this sensor is used to determine the position of the engine relative to top dead centre (TDC) and to calculate the speed of the engine.
												This sensor is the primary signal to initiate ignition and fueling.
											</p>
										</div>
									</div>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-air-intake-sensor.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Air Intake Temperature Sensor (ATS)</h5>
											<p>
												Fitted to the underside of the air filter, this sensor reads the temperature of the air entering the inlet manifold.
												Whilst used as a reference in the air / fuel ratio calculation, it has no impact on fueling.
											</p>
										</div>
									</div>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-coolant-sensor.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Coolant Temperature Sensor (CTS)</h5>
											<p>
												Fitted to the underside of the inlet manifold, this sensor reads the temperature of the coolant.
												Normal operating temperature is usually from 80C to 100C and is a critical value in the calculation of ignition timing and duration.
											</p>
										</div>
									</div>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/vacuum-ecu.jpeg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Manifold Absolute Pressure (MAP)</h5>
											<p>
												The MAP sensor is fitted inside the ECU and reads the inlet manifold vacuum via a vacuum pipe that runs from the inlet manifold to the ECU via a fuel trap.
												The fuel trap prevents vapours entering and damaging the MAP sensor. The MAP sensor is used to measure the load on the engine.
												Using the MAP value and the speed of the engine from the CAS, the ECU calculates the air / fuel ratio.
											</p>
										</div>
									</div>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-under-inlet-manifold.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Oxygen (Lambda) Sensor (OS)</h5>
											<p>
												The MEMS injection system implements a closed-loop control system which monitors the oxygen content in the exhaust gases in order to reduce exhaust emissions.
												Fitted to the exhaust down pipe, this sensor is the critical component in the O2 System. The lambda sensor starts working once it reaches 300C.
												The lambda sensor is fitted with a heater which is switched on via a relay once the engine is running to reach this operating temperature as soon as possible.
												Once the sensor is at operating temperature it will read low oxygen level in a rich mixture and a high oxygen level in a lean mixture.
												The ECU uses these readings to adjust the fuel mixture accordingly. This adjustment happens many times a second.
											</p>
										</div>
									</div>

									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-throttle-pot-sensor.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Throttle Potentiometer Sensor (TPS)</h5>
											<p>
												The TPS is fitted to the side of the injector unit, you can see the connector and cable above the pen in the image.
												This sensor is used by the ECU to determine the angle of the throttle and whether the engine is idle.
											</p>
										</div>
									</div>

									<div class="row mt-2">
										<div class="col-2">
											<img src="/static/images/spi-throttle-switch.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Throttle Switch (TS)</h5>
											<p>
												Fitted on early SPI Minis only the Throttle Switch is used by the ECU to determine whether the engine is idling.
												On the later MEMS 1.6 ECU, the idle is determined using the Throttle Potentiometer Sensor.
											</p>
										</div>
									</div>
								</div>
								<!-- guide-to-ecu-sensors.html -->

								<!-- guide-to-ecu-actuators.html -->
								<div class="card p-3 mt-2">
									<div class="row my-2">
										<div class="col-2">
											<img src="/static/images/spi-idle-stop-screw.jpg" style="width:100%;" class="rounded" alt="emssion control systems">
										</div>
										<div class="col">
											<h5>Stepper Motor / Idle Air Control (IAC) Steps</h5>
											<p>
												The stepper motor is used to control the idle speed during normal idle and during engine warm-up by adjusting the throttle.
												The ECU will also use the stepper motor to adjust the idle when additional electrical load such as headlights are switched on as this can cause the engine speed to drop.
												The ECU drives the stepper motor via a cam, to a push rod (both are in the stepper housing lid) which acts directly on to what is called the Throttle Spindle Stop.
												This small round flat disc is attached, via the Idle Stop Screw, to the throttle body linkage (see pic) and therefore the throttle disc and air supply/flow into the engine.
												If you watch the push rod carefully when the engine is warming up, you will be able to see it moving in and out a bit.
												<strong>Never adjust this screw without using a diagnostic tool and follow <a href="https://memsfcr.co.uk/setting-the-idle-speed-stepper-motor/" target="_blank">this guide</a></strong>
											</p>
											<p>
												It is important to understand that the ECU cannot read the position of the stepper motor. When you turn off the engine, you should hear an audible clicking, this is the ECU driving the stepper fully closed.
												It drives it for 180 steps and a few more to make sure its closed, in doing this it knows where it is, zero steps, and can then count the steps open.
												After it has driven the stepper full closed and before the ECU switches off, it then opens the stepper to a point determined by the engine temp, ready for the next start.
												The IAC Position reported by the ECU is based on this learnt position and reports the number of steps it has applied to the stepper motor.
											</p>
										</div>
									</div>
								</div>
								<!-- guide-to-ecu-actuators.html -->
							</div>
						</div>
					</div>
					<!-- guide-to-ecu.jinja -->

					<!-- guide-to-ecu-faults.html -->
					<div class="card mt-3">
						<div class="card-header bg-danger text-white">ECU Sensor Faults</div>
						<div class="card-body">
							<div>
								<p>
									Any reported sensor fault will cause the ECU to run the engine in limp mode and likely cause over fueling. Do not make any adjustments until the sensor fault is fixed.
								</p>
								<h4>Action Plan</h4>
								<ul>
									<li>Clear the faults</li>
									<li>Switch off ignition</li>
									<li>Switch on ignition and check the fault codes again</li>
									<li>If the faults persist or after driving the car they reappear, replace the sensor / check the relevant circuit</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- guide-to-ecu-faults.html -->

					<!-- guide-to-expected-values.html -->
					<div class="card mt-3">
						<div class="card-header bg-success text-white">Guide to Expected Values</div>
						<div class="card-body">
							<div>
								<p>
									The ECU will react to conditions based on the values it reads from the sensors fitted to the engine. The following details the behaviour and expected values.
								</p>
								<h4>Ignition is ON, Engine not Running</h4>
								<ul>
									<li>Engine RPM 0</li>
									<li>MAP 100kPa (this is atmospheric pressure, e.g. no vacuum)</li>
									<li>Air Intake Temperature at general air temperature e.g 20C</li>
									<li>Lambda Voltage 435mV, not oscillating</li>
									<li>O2 System (Lambda Status) is Inactive (0)</li>
									<li>Loop is Open (Closed Loop = 0)</li>
								</ul>
								<h4>Ignition is ON, Engine COLD : Running and Idle</h4>
								<ul>
									<li>Engine RPM 1200 and actively decreasing to 850 as the engine warms</li>
									<li>MAP 40kPa or less (lower is better), higher than 40kPa indicates a possible vacuum fault, 0kPA is a sensor fault</li>
									<li>Coolant Temperature increasing a degree every 10-15 seconds until the thermostat temperature is reached (88C). A static 60C indicates a possible fault</li>
									<li>Air Intake Temperature at general air temperature e.g 20C</li>
									<li>Lambda Voltage will rise and then gradually reduce, then start rapidly oscillating between 100mV and 900mV after 90 seconds</li>
									<li>O2 System (Lambda Status) is Active (1) after 90 seconds. If the lambda fails to oscillate then this value will change 0 and the ECU will enter limp home mode</li>
								</ul>
								<h4>Ignition is ON, Engine WARM : Running and Idle</h4>
								<ul>
									<li>Engine RPM 850 +/- 10 </li>
									<li>MAP 40kPa or less (lower is better)</li>
									<li>Coolant Temperature > 80C. Whilst the thermostat is 88C, the ECU determines a coolant temperature > 80C as operating temperature.</li>
									<li>Air Intake Temperature at general air temperature e.g 20C</li>
									<li>Lambda Voltage is oscillating</li>
									<li>O2 System (Lambda Status) is Active (1)</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- guide-to-expected-values.html -->

					<!-- guide-to-o2-system.html -->
					<div class="card mt-3">
						<div class="card-header bg-success text-white">Guide to the Oxygen Monitoring System</div>
						<div class="card-body">
							<div>
								<p>
									The oxygen monitoring system (O2 System) is critical to the fuel mixture determined by the ECU. The system relies on a working Lambda Sensor (O2 Sensor).<br>
									When the ignition is switched on, the ECU Lambda relay is energised to enable the Lambda Sensor heater. A failure in the lambda heater or the circuit will delay the start of the lambda oscillating and a failure in the O2 System.<br>
									After approximately 90 seconds the Lambda Sensor should start rapidly oscillating between 100mv and 900mV.
									The ECU expects this behaviour, <strong>if the lambda voltage is a static or oscillations are slow, the ECU will determine a failure in the O2 System.</strong>
									If the lambda is working correctly, the ECU will enter Closed Loop mode where it uses the lambda readings to adjust the fueling accordingly.
								</p>
								<h4>A Working O2 System</h4>
								<ul>
									<li>Lambda Voltage oscillates rapidly between 100mV and 900mV after 90s of start</li>
									<li>O2 System  Status is Active (O2 Lambda Status = 1) after 90s of start</li>
									<li>Loop is Closed (Closed Loop = 1)</li>
									<li>Lambda Heater relay is working, this can be tested</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- guide-to-o2-system.html -->

					<!-- guide-to-vacuum-system.html -->
					<div class="card mt-3">
						<div class="card-header bg-success text-white">Guide to the Vacuum System</div>
						<div class="card-body">
							<div>
								<p>
									There are several parts to the vacuum system, namely the inlet manifold, the inlet manifold pipes and fuel trap, the vacuum rail and the carbon canister.
									Pressure is created in the inlet manifold when the engine is running and can be measured to determine the load and performance of the engine.
									A loss of vacuum pressure will result in the ECU being unable to accurately measure and adapt to engine load and lose the ability to control the rpm of the engine.
									In the worst case, this will result in erratic engine rpm and massive over-fuelling.
									The most notorious and troublesome part of this system is the inlet manifold vacuum pipes and fuel trap that run to the ECU.
									A break in the pipe can lead to complete loss of vacuum, however more common is a split in an elbow connector will give partial loss and over-fuelling will be the most notable symptom rather than erratic running.
								</p>
								<div class="row row-cols-3">
									<div class="col"><img src="/static/images/vacuum-pipe.jpeg" style="width:100%;" class="rounded m-1" alt="emssion control systems">Vacuum Pipe Elbows can split causing a high MAP reading</div>
									<div class="col"><img src="/static/images/vacuum-manifold.jpeg" style="width:100%;" class="rounded m-1" alt="emssion control systems">Vacuum Pipe fits behind the inlet manifold</div>
									<div class="col"><img src="/static/images/vacuum-fueltrap.jpeg" style="width:100%;" class="rounded m-1" alt="emssion control systems">The fuel trap. This prevents vapours entering the ECU MAP sensor</div>
								</div>
								<div class="row row-cols-3 mb-5">
									<div class="col"><img src="/static/images/vacuum-ecu.jpeg" style="width:100%;" class="rounded m-1" alt="emssion control systems">ECU MAP connection</div>
									<div class="col"><img src="/static/images/vacuum-charcoal.jpeg" style="width:100%;" class="rounded m-1" alt="emssion control systems">Carbon Filter Solenoid Valve</div>
									<div class="col"></div>
								</div>
								<h4>A Working Vacuum System</h4>
								<ul>
									<li>Manifold Absolute Pressure (MAP) is 40kPa or lower. A warm engine is likely to be in the range of 34kPA - 40kPA.</li>
									<li>Carbon Canister Value relay operates after the throttle has been held open at >= 2000 rpm for a period of time (30 seconds or so)</li>
								</ul>
								<h4>Action Plan for a Failing Vacuum System</h4>
								<ul>
									<li>Check vacuum pipes for breaks, in particular check the elbow connectors for splits and are firmly attached to the pipes</li>
									<li>Check vacuum pipes are not pushed so far on to the fuel trap so they block the air flow.</li>
									<li>Check fuel trap by sealing one end with your finger and blowing into it</li>
								</ul>
								<h4>Action Plan for a Partial Vacuum System</h4>
								<p>In many cases the Manifold Absolute Pressure (MAP) in a partially failing system maybe just above 40kPa, probably in the range of 41kPA - 50kPA. Over-fuelling will be the most notable symptom rather than erratic running</p>
								<ul>
									<li>Follow steps for a Failing Vacuum System</li>
									<li>Check inlet manifold is tightened correctly</li>
									<li>Check vacuum pipe from inlet manifold to vacuum rail</li>
									<li>Check vacuum pipe to carbon canister</li>
									<li>Optionally replace the vacuum pipes with silicon vacuum pipes (3mm internal diameter).</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- guide-to-vacuum-system.html -->

					<!-- credits.html -->
					<div class="card mt-3 bg-light">
						<div class="card-header">Credits and Thanks</div>
						<div class="card-body">
							<p>
								Much of the information and guidance has been sourced from the community, if your images or words feature and I haven't thanked you specifically for your contribution, then thank you.
								I have reused guides and images as these are publicly searchable and available in various forums and doing so reinforces a single source of the truth in a web full of rumours and misinformation.
							</p>
							<ul>
								<li>Roger Carpenter, Classic Mini NLA: Rare & Alternative parts</li>
								<li>Leopold Gunther, mems-rosco</li>
								<li>James Portman, rovermems.com</li>
								<li>Colin Bourassa, memsgauge / memsreader</li>
								<li>The MiniForum, SPI Section, in particular the articles by Sprocket</li>
								<li>Black Box Solutions, FCR diagnostics</li>
							</ul>
						</div>
						<div>
							<p>
								In addition, a number of organizations have been generous enough to support the development and distribution of open-source software.
								Thanks to:
							<ul>
								<li>Jetbrains who provide IntelliJ for open-source software development</li>
								<li>Advanced Installer who provided the installation software for Windows distribution</li>
							</ul>
							</p>
						</div>
					</div>
					<!-- credits.html -->

					<!-- guidance.html -->
				</div>
			</div>
		</div>
	</main>

	<footer class="page-footer font-small pt-4">
<!-- footer.html -->
		<div class="footer-copyright text-center py-3">Version 1.3.1 © 2023 Copyright Andrew Jackson<br></div>
<!-- footer.html -->
	</footer>

</div>
</body>
</html>
